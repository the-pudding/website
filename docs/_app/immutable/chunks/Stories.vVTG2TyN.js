import{a as b,t as _,c as T}from"./disclose-version.Ckrn2PLg.js";import{g as l,j as a,i as S,m as P,a9 as q,s as x,t as C,l as t,o as D,x as z,w as $,ab as A,v as L,k as I,y as G}from"./index-client.C75Qpj4Y.js";import{e as M,i as E,b as H,p as J,j}from"./props.meDx0K-t.js";import{s as y,h as Q,e as V}from"./attributes.C2oiQdJS.js";import{c as W}from"./svelte-component.DG6SyfSz.js";import{a as B,S as K}from"./Story.CoIw1G80.js";import{b as h}from"./entry.BNQgxlZj.js";import"./transform.BXP9HJX6.js";var N=_('<div class="interstitial-inner svelte-1xz3wkn"><div class="sticker-set svelte-1xz3wkn"><img class="icon svelte-1xz3wkn" alt="mailbox sticker"></div> <p class="svelte-1xz3wkn">Get The Pudding <br>in your inbox:</p> <form action="https://buttondown.com/api/emails/embed-subscribe/thepudding" method="post" class="embeddable-buttondown-form svelte-1xz3wkn"><input type="email" class="email-input svelte-1xz3wkn" name="email" placeholder="you@example.com"> <label for="bd-email" class="svelte-1xz3wkn">Prove you&lsquo;re human:</label> <input placeholder="What is 1+1?" type="number" step="1" name="metadata__captcha" id="captcha" required class="svelte-1xz3wkn"> <input type="hidden" value="1" name="embed" class="svelte-1xz3wkn"> <input type="submit" class="submit-input svelte-1xz3wkn" value="Subscribe"></form></div>');function O(d){var n=N(),m=l(n),v=l(m);y(v,"src",`${h??""}/assets/stickers/mailbox@2x.png`),a(m),S(4),a(n),b(d,n)}function R(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}var U=_('<div class="interstitial-inner svelte-1cdiliy"><p class="svelte-1cdiliy">If you like our stories,<br> youâ€™ll love our merch</p> <div class="sticker-set svelte-1cdiliy"><img class="icon svelte-1cdiliy" alt="pudding tee with a skeleton working on a computer"> <img class="sticker-left svelte-1cdiliy" alt="a red and yellow technical sticker that reads The Pudding: Visual Data Stories About Just About Everything"> <img class="sticker-right svelte-1cdiliy" alt="a green blob sticker that reads Pudding Dot Cool"></div> <a href="https://the-pudding.printify.me/products" class="svelte-1cdiliy">Shop our swag</a></div>');function X(d,n){P(n,!0);let m=z(`${h}/assets/img/merch-tee-light.png`);const v=()=>{const e=R();$(m,M(e==="dark"?`${h}/assets/img/merch-tee-light.png`:`${h}/assets/img/merch-tee-dark.png`))};q(()=>{v();const e=window.matchMedia("(prefers-color-scheme: dark)"),o=()=>{v()};return e.addEventListener("change",o),()=>{e.removeEventListener("change",o)}});var r=U(),i=x(l(r),2),c=l(i),p=x(c,2);y(p,"src",`${h??""}/assets/img/merch-sticker-left.png`);var u=x(p,2);y(u,"src",`${h??""}/assets/img/merch-sticker-right.png`),a(i),S(2),a(r),C(()=>y(c,"src",t(m))),b(d,r),D()}var Y=_('<p class="svelte-fhmh0z">Some of my favorite projects: <!>.</p> <div class="credit svelte-fhmh0z"><a class="svelte-fhmh0z"><img class="svelte-fhmh0z"> <p class="name svelte-fhmh0z"> </p> <p class="title svelte-fhmh0z">Pudding Staff</p></a></div>',1),Z=_('<div class="interstitial-inner svelte-fhmh0z"><!></div>');function ee(d,n){P(n,!0);const{stories:m,staff:v}=A("Home");let r=z(void 0),i=z(void 0);L(()=>{const e=m.filter(s=>s.faves),o=B(e)[0].faves.trim(),f=e.filter(s=>s.faves===o).slice(0,3);$(i,M(v.find(s=>s.id===o)));const g=f.map(({href:s,short:k})=>`<a href=${s} rel="external" class="bold-link">${k}</a>`).join(", ");$(r,M(g.replace(/,([^,]*)$/," and$1")))});var c=Z(),p=l(c);E(p,()=>t(r),u=>{var e=Y(),o=I(e),f=x(l(o));Q(f,()=>t(r)),S(),a(o);var g=x(o,2),s=l(g),k=l(s),w=x(k,2),F=l(w,!0);a(w),S(2),a(s),a(g),C(()=>{y(s,"href",`${h??""}/author/${t(i).slug??""}`),y(k,"src",`${h??""}/common/assets/authors/${t(i).id??""}.jpg`),y(k,"alt",`headshot of ${t(i).name??""}`),H(F,t(i).name)}),b(u,e)}),a(c),b(d,c),D()}var se=_('<li class="svelte-lc01k1"><!></li>'),te=_('<section id="stories" class="svelte-lc01k1"><ul class="svelte-lc01k1"></ul></section>');function de(d,n){const m={Subscribe:O,Faves:ee,Merch:X};let v=J(n,"resource",3,!1);var r=te(),i=l(r);V(i,21,()=>n.stories,c=>c.slug,(c,p)=>{var u=se();const e=G(()=>m[t(p).component]);var o=l(u);E(o,()=>t(e),f=>{var g=T(),s=I(g);W(s,()=>t(e),(k,w)=>{w(k,j(()=>t(p)))}),b(f,g)},f=>{K(f,j(()=>t(p),{get resource(){return v()}}))}),a(u),b(c,u)}),a(i),a(r),b(d,r)}export{de as S};
