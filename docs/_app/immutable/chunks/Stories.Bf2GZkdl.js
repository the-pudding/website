import{a as b,t as S,c as T}from"./disclose-version.Ckrn2PLg.js";import{g as c,j as a,i as $,m as P,a9 as q,s as _,t as C,l as t,o as D,x,w,ab as A,v as L,k as I,y as G}from"./index-client.C75Qpj4Y.js";import{e as M,i as E,b as H,p as J,j}from"./props.meDx0K-t.js";import{s as y,h as Q,e as V}from"./attributes.C2oiQdJS.js";import{c as W}from"./svelte-component.DG6SyfSz.js";import{a as B,S as K}from"./Story.Dr-m1oim.js";import{b as h}from"./entry.CPrILFSO.js";import"./transform.BXP9HJX6.js";var N=S('<div class="interstitial-inner svelte-1ckzsgf"><div class="sticker-set svelte-1ckzsgf"><img class="icon svelte-1ckzsgf" alt="mailbox sticker"></div> <p class="svelte-1ckzsgf">Get The Pudding <br>in your inbox:</p> <form action="https://buttondown.com/api/emails/embed-subscribe/thepudding" method="post" class="embeddable-buttondown-form svelte-1ckzsgf"><input type="email" class="email-input svelte-1ckzsgf" name="email" placeholder="you@example.com"> <label for="bd-email" class="svelte-1ckzsgf">Prove you&lsquo;re human:</label> <input placeholder="What is 1+1?" type="number" step="1" name="metadata__captcha" id="captcha" required class="svelte-1ckzsgf"> <input type="hidden" value="1" name="embed" class="svelte-1ckzsgf"> <input type="submit" class="submit-input svelte-1ckzsgf" value="Subscribe"></form></div>');function O(d){var l=N(),m=c(l),v=c(m);y(v,"src",`${h??""}/assets/stickers/mailbox@2x.png`),a(m),$(4),a(l),b(d,l)}function R(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}var U=S('<div class="interstitial-inner svelte-1cdiliy"><p class="svelte-1cdiliy">If you like our stories,<br> youâ€™ll love our merch</p> <div class="sticker-set svelte-1cdiliy"><img class="icon svelte-1cdiliy" alt="pudding tee with a skeleton working on a computer"> <img class="sticker-left svelte-1cdiliy" alt="a red and yellow technical sticker that reads The Pudding: Visual Data Stories About Just About Everything"> <img class="sticker-right svelte-1cdiliy" alt="a green blob sticker that reads Pudding Dot Cool"></div> <a href="https://the-pudding.printify.me/products" class="svelte-1cdiliy">Shop our swag</a></div>');function X(d,l){P(l,!0);let m=x(`${h}/assets/img/merch-tee-light.png`);const v=()=>{const e=R();w(m,M(e==="dark"?`${h}/assets/img/merch-tee-light.png`:`${h}/assets/img/merch-tee-dark.png`))};q(()=>{v();const e=window.matchMedia("(prefers-color-scheme: dark)"),o=()=>{v()};return e.addEventListener("change",o),()=>{e.removeEventListener("change",o)}});var r=U(),i=_(c(r),2),n=c(i),p=_(n,2);y(p,"src",`${h??""}/assets/img/merch-sticker-left.png`);var u=_(p,2);y(u,"src",`${h??""}/assets/img/merch-sticker-right.png`),a(i),$(2),a(r),C(()=>y(n,"src",t(m))),b(d,r),D()}var Y=S('<p class="svelte-fhmh0z">Some of my favorite projects: <!>.</p> <div class="credit svelte-fhmh0z"><a class="svelte-fhmh0z"><img class="svelte-fhmh0z"> <p class="name svelte-fhmh0z"> </p> <p class="title svelte-fhmh0z">Pudding Staff</p></a></div>',1),Z=S('<div class="interstitial-inner svelte-fhmh0z"><!></div>');function ee(d,l){P(l,!0);const{stories:m,staff:v}=A("Home");let r=x(void 0),i=x(void 0);L(()=>{const e=m.filter(s=>s.faves),o=B(e)[0].faves.trim(),f=e.filter(s=>s.faves===o).slice(0,3);w(i,M(v.find(s=>s.id===o)));const g=f.map(({href:s,short:k})=>`<a href=${s} rel="external" class="bold-link">${k}</a>`).join(", ");w(r,M(g.replace(/,([^,]*)$/," and$1")))});var n=Z(),p=c(n);E(p,()=>t(r),u=>{var e=Y(),o=I(e),f=_(c(o));Q(f,()=>t(r)),$(),a(o);var g=_(o,2),s=c(g),k=c(s),z=_(k,2),F=c(z,!0);a(z),$(2),a(s),a(g),C(()=>{y(s,"href",`${h??""}/author/${t(i).slug??""}`),y(k,"src",`${h??""}/common/assets/authors/${t(i).id??""}.jpg`),y(k,"alt",`headshot of ${t(i).name??""}`),H(F,t(i).name)}),b(u,e)}),a(n),b(d,n),D()}var se=S('<li class="svelte-lc01k1"><!></li>'),te=S('<section id="stories" class="svelte-lc01k1"><ul class="svelte-lc01k1"></ul></section>');function de(d,l){const m={Subscribe:O,Faves:ee,Merch:X};let v=J(l,"resource",3,!1);var r=te(),i=c(r);V(i,21,()=>l.stories,n=>n.slug,(n,p)=>{var u=se();const e=G(()=>m[t(p).component]);var o=c(u);E(o,()=>t(e),f=>{var g=T(),s=I(g);W(s,()=>t(e),(k,z)=>{z(k,j(()=>t(p)))}),b(f,g)},f=>{K(f,j(()=>t(p),{get resource(){return v()}}))}),a(u),b(n,u)}),a(i),a(r),b(d,r)}export{de as S};
