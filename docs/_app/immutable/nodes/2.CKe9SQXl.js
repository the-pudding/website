import{a as W,t as D}from"../chunks/disclose-version.Ckrn2PLg.js";import{aF as X,r as ee,h as te,m as Y,ab as se,x as q,v as O,o as Z,l as v,w as U,y as ne,g as A,s as S,j as M,t as re,aG as oe,k as ae}from"../chunks/index-client.C75Qpj4Y.js";import{M as ie}from"../chunks/Meta.D7W2AOFg.js";import{d as ce,e as B,i as le}from"../chunks/props.meDx0K-t.js";import{r as ue}from"../chunks/attributes.C2oiQdJS.js";import{t as fe}from"../chunks/Story.CoIw1G80.js";import{l as de,F as ve}from"../chunks/Filters.NhAbtGHm.js";import{b as he}from"../chunks/this.Bm9NJbuO.js";import"../chunks/transform.BXP9HJX6.js";import{S as pe}from"../chunks/Stories.vVTG2TyN.js";import{d as me}from"../chunks/descending.BO6OmMcj.js";function ge(e,s,n=s){var o=X();de(e,"input",()=>{var r=V(e)?P(e.value):e.value;n(r),o&&r!==(r=s())&&(e.value=r??"")}),ee(()=>{var r=s();if(te&&e.defaultValue!==e.value){n(e.value);return}V(e)&&r===P(e.value)||e.type==="date"&&!r&&!e.value||r!==e.value&&(e.value=r??"")})}function V(e){var s=e.type;return s==="number"||s==="range"}function P(e){return e===""?null:+e}var x={},I={},L=34,E=10,N=13;function z(e){return new Function("d","return {"+e.map(function(s,n){return JSON.stringify(s)+": d["+n+'] || ""'}).join(",")+"}")}function we(e,s){var n=z(e);return function(o,r){return s(n(o),r,e)}}function H(e){var s=Object.create(null),n=[];return e.forEach(function(o){for(var r in o)r in s||n.push(s[r]=r)}),n}function d(e,s){var n=e+"",o=n.length;return o<s?new Array(s-o+1).join(0)+n:n}function be(e){return e<0?"-"+d(-e,6):e>9999?"+"+d(e,6):d(e,4)}function _e(e){var s=e.getUTCHours(),n=e.getUTCMinutes(),o=e.getUTCSeconds(),r=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":be(e.getUTCFullYear())+"-"+d(e.getUTCMonth()+1,2)+"-"+d(e.getUTCDate(),2)+(r?"T"+d(s,2)+":"+d(n,2)+":"+d(o,2)+"."+d(r,3)+"Z":o?"T"+d(s,2)+":"+d(n,2)+":"+d(o,2)+"Z":n||s?"T"+d(s,2)+":"+d(n,2)+"Z":"")}function Ce(e){var s=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function o(t,a){var h,c,i=r(t,function(b,p){if(h)return h(b,p-1);c=b,h=a?we(b,a):z(b)});return i.columns=c||[],i}function r(t,a){var h=[],c=t.length,i=0,b=0,p,R=c<=0,_=!1;t.charCodeAt(c-1)===E&&--c,t.charCodeAt(c-1)===N&&--c;function f(){if(R)return I;if(_)return _=!1,x;var u,m=i,C;if(t.charCodeAt(m)===L){for(;i++<c&&t.charCodeAt(i)!==L||t.charCodeAt(++i)===L;);return(u=i)>=c?R=!0:(C=t.charCodeAt(i++))===E?_=!0:C===N&&(_=!0,t.charCodeAt(i)===E&&++i),t.slice(m+1,u-1).replace(/""/g,'"')}for(;i<c;){if((C=t.charCodeAt(u=i++))===E)_=!0;else if(C===N)_=!0,t.charCodeAt(i)===E&&++i;else if(C!==n)continue;return t.slice(m,u)}return R=!0,t.slice(m,c)}for(;(p=f())!==I;){for(var l=[];p!==x&&p!==I;)l.push(p),p=f();a&&(l=a(l,b++))==null||h.push(l)}return h}function g(t,a){return t.map(function(h){return a.map(function(c){return T(h[c])}).join(e)})}function w(t,a){return a==null&&(a=H(t)),[a.map(T).join(e)].concat(g(t,a)).join(`
`)}function j(t,a){return a==null&&(a=H(t)),g(t,a).join(`
`)}function F(t){return t.map(y).join(`
`)}function y(t){return t.map(T).join(e)}function T(t){return t==null?"":t instanceof Date?_e(t):s.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:o,parseRows:r,format:w,formatBody:j,formatRows:F,formatRow:y,formatValue:T}}var je=Ce(","),ye=je.parse;async function Te(e){const n=await(await fetch(e)).text();return ye(n)}const ke=["a","an","and","are","as","at","be","but","by","for","if","in","into","is","it","no","not","of","on","or","such","that","the","their","then","there","these","they","this","to","was","will","with","here","who","its","what","where","when","why","whats","we","how"];function k(e){return e==null?void 0:e.toLowerCase().split(/\s+/).map(s=>s.replace(/[^a-z]/g,"")).filter(s=>s&&!ke.includes(s))}function Fe(e,s,n){e.stopPropagation(),U(s,B(n.length))}var Ae=D('<div class="more svelte-js6qnc"><button class="svelte-js6qnc"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-down svelte-js6qnc"><polyline points="6 9 12 15 18 9"></polyline></svg> <span class="svelte-js6qnc">Load More Stories</span></button></div>'),Me=D('<div class="c svelte-js6qnc"><div class="ui column-wide svelte-js6qnc"><div class="search svelte-js6qnc"><img class="icon svelte-js6qnc" src="assets/stickers/search@2x.png" aria-hidden="true" alt=""> <input type="text" placeholder="Find a story..." class="svelte-js6qnc"></div> <div class="filters"><!></div></div> <div class="stories"><!></div> <!></div>');function Re(e,s){Y(s,!0);const n=27,{stories:o}=se("Home"),r=["Our Faves","Popular","Updating","Your Input","Video","Audio"];let g=q(n),w,j=q(B([...o])),F=q(""),y=q(void 0),T=ne(()=>{const f=v(F).toLowerCase(),l=v(j).filter(m=>{const J=k(f).every($=>m.search.some(K=>K.includes($))),Q=v(y)?m.filters.includes(v(y)):!0;return J&&Q});l.sort((m,C)=>me(m.id,C.id));const u=l.slice(0,v(g));return u.splice(7,0,{component:"Subscribe",slug:"Subscribe"}),u.splice(15,0,{component:"Faves",slug:"Faves"}),u.splice(26,0,{component:"Merch",slug:"Merch"}),u});O(()=>{v(F)&&(w.scrollIntoView({behavior:"instant"}),window.scrollBy({top:-54,behavior:"instant"}))}),O(async()=>{const f=await Te("assets/data/search.csv");U(j,B(v(j).map(l=>{const u=f.find(m=>m.slug===l.slug)||{};return{...l,search:[...k(l.tease),...k(l.short),...k(u.hed),...k(u.dek),...k(u.keyword),...k(u.author)]}})))});var t=Me(),a=A(t),h=A(a),c=S(A(h),2);ue(c),M(h);var i=S(h,2),b=A(i);ve(b,{filters:r,get activeFilter(){return v(y)},set activeFilter(f){U(y,B(f))}}),M(i),M(a);var p=S(a,2);he(p,f=>w=f,()=>w);var R=A(p);pe(R,{get stories(){return v(T)}}),M(p);var _=S(p,2);le(_,()=>o.length>v(g),f=>{var l=Ae(),u=A(l);u.__click=[Fe,g,o],M(l),re(()=>fe(l,"visible",v(T).length>v(g))),W(f,l)}),M(t),ge(c,()=>v(F),f=>U(F,f)),W(e,t),Z()}ce(["click"]);function Ee(){console.log("--- --- --- --- --- ---"),console.log("svelte-starter: 6.3.1"),console.log("build: 2025-08-22-08:56"),console.log("--- --- --- --- --- ---")}const Se="The Pudding",qe="The Pudding explains ideas with visual essays.",G={title:Se,description:qe};var Ue=D("<!> <!>",1);function Ge(e,s){Y(s,!0),Ee();const n=["https://pudding.cool/assets/fonts/tiempos/TiemposTextWeb-Regular.woff2","https://pudding.cool/assets/fonts/tiempos/TiemposTextWeb-Bold.woff2","https://pudding.cool/assets/fonts/atlas/AtlasGrotesk-Regular-Web.woff2","https://pudding.cool/assets/fonts/atlas/AtlasGrotesk-Bold-Web.woff2","https://pudding.cool/assets/fonts/atlas/AtlasTypewriter-Medium-Web.woff2"],{stories:o,staff:r}=s.data;oe("Home",{stories:o,copy:G,staff:r});var g=Ue(),w=ae(g);ie(w,{copy:G,preloadFont:n});var j=S(w,2);Re(j,{}),W(e,g),Z()}export{Ge as component};
