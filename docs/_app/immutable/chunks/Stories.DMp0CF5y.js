import{a as k,t as w,c as A}from"./disclose-version.Ckrn2PLg.js";import{g as l,j as a,i as $,m as D,a9 as L,s as _,t as I,l as t,o as P,x,w as M,ab as G,v as H,k as E,y as J}from"./index-client.C75Qpj4Y.js";import{e as j,i as F,b as Q,p as V,j as C}from"./props.meDx0K-t.js";import{s as y,h as q,e as z}from"./attributes.C2oiQdJS.js";import{c as B}from"./svelte-component.DG6SyfSz.js";import{a as K,S as N}from"./Story.DxF_VWEL.js";import{b as f}from"./entry.BEqiOp2k.js";import"./transform.BXP9HJX6.js";var O=w('<div class="interstitial-inner svelte-n6o9fa"><div class="sticker-set svelte-n6o9fa"><img class="icon svelte-n6o9fa" alt="mailbox sticker"></div> <p class="svelte-n6o9fa">Get The Pudding <br>in your inbox</p> <form action="https://buttondown.com/api/emails/embed-subscribe/thepudding" method="post" class="embeddable-buttondown-form svelte-n6o9fa"><input type="email" class="email-input svelte-n6o9fa" name="email" placeholder="you@example.com"> <input type="hidden" value="1" name="embed" class="svelte-n6o9fa"> <input type="submit" class="submit-input svelte-n6o9fa" value="Subscribe"></form></div>');function R(m){var n=O(),d=l(n),v=l(d);y(v,"src",`${f??""}/assets/stickers/mailbox@2x.png`),a(d),$(4),a(n),k(m,n)}function U(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}var W=w('<div class="interstitial-inner svelte-1cdiliy"><p class="svelte-1cdiliy">If you like our stories,<br> youâ€™ll love our merch</p> <div class="sticker-set svelte-1cdiliy"><img class="icon svelte-1cdiliy" alt="pudding tee with a skeleton working on a computer"> <img class="sticker-left svelte-1cdiliy" alt="a red and yellow technical sticker that reads The Pudding: Visual Data Stories About Just About Everything"> <img class="sticker-right svelte-1cdiliy" alt="a green blob sticker that reads Pudding Dot Cool"></div> <a href="https://the-pudding.printify.me/products" class="svelte-1cdiliy">Shop our swag</a></div>');function X(m,n){D(n,!0);let d=x(`${f}/assets/img/merch-tee-light.png`);const v=()=>{const e=U();M(d,j(e==="dark"?`${f}/assets/img/merch-tee-light.png`:`${f}/assets/img/merch-tee-dark.png`))};L(()=>{v();const e=window.matchMedia("(prefers-color-scheme: dark)"),o=()=>{v()};return e.addEventListener("change",o),()=>{e.removeEventListener("change",o)}});var r=W(),i=_(l(r),2),c=l(i),u=_(c,2);y(u,"src",`${f??""}/assets/img/merch-sticker-left.png`);var p=_(u,2);y(p,"src",`${f??""}/assets/img/merch-sticker-right.png`),a(i),$(2),a(r),I(()=>y(c,"src",t(d))),k(m,r),P()}var Y=w('<p class="svelte-10awf7u">Some of my favorite projects: <!>.</p> <div class="credit svelte-10awf7u"><a class="svelte-10awf7u"><img class="svelte-10awf7u"> <p class="name svelte-10awf7u"> </p> <p class="title svelte-10awf7u">Pudding Staff</p></a></div>',1),Z=w('<div class="interstitial-inner svelte-10awf7u"><!></div>');function ee(m,n){D(n,!0);const{stories:d,staff:v}=G("Home");let r=x(void 0),i=x(void 0);H(()=>{const e=d.filter(s=>s.faves),o=K(e)[0].faves.trim(),h=e.filter(s=>s.faves===o).slice(0,3);M(i,j(v.find(s=>s.id===o)));const g=h.map(({href:s,short:b})=>`<a href=${s} rel="external" class="bold-link">${b}</a>`).join(", ");M(r,j(g.replace(/,([^,]*)$/," and$1")))});var c=Z(),u=l(c);F(u,()=>t(r),p=>{var e=Y(),o=E(e),h=_(l(o));q(h,()=>t(r)),$(),a(o);var g=_(o,2),s=l(g),b=l(s),S=_(b,2),T=l(S,!0);a(S),$(2),a(s),a(g),I(()=>{y(s,"href",`${f??""}/author/${t(i).slug??""}`),y(b,"src",`${f??""}/common/assets/authors/${t(i).id??""}.jpg`),y(b,"alt",`headshot of ${t(i).name??""}`),Q(T,t(i).name)}),k(p,e)}),a(c),k(m,c),P()}var se=w('<li class="svelte-lc01k1"><!></li>'),te=w('<section id="stories" class="svelte-lc01k1"><ul class="svelte-lc01k1"></ul></section>');function me(m,n){const d={Subscribe:R,Faves:ee,Merch:X};let v=V(n,"resource",3,!1);var r=te(),i=l(r);z(i,21,()=>n.stories,c=>c.slug,(c,u)=>{var p=se();const e=J(()=>d[t(u).component]);var o=l(p);F(o,()=>t(e),h=>{var g=A(),s=E(g);B(s,()=>t(e),(b,S)=>{S(b,C(()=>t(u)))}),k(h,g)},h=>{N(h,C(()=>t(u),{get resource(){return v()}}))}),a(p),k(c,p)}),a(i),a(r),k(m,r)}export{me as S};
