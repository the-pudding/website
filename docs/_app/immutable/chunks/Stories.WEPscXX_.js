import{a as k,t as _,c as A}from"./disclose-version.Ckrn2PLg.js";import{g as l,j as a,i as S,m as D,a9 as L,s as x,t as I,l as t,o as P,x as $,w as M,ab as G,v as H,k as E,y as J}from"./index-client.C75Qpj4Y.js";import{e as j,i as F,b as Q,p as V,j as C}from"./props.meDx0K-t.js";import{s as y,h as q,e as z}from"./attributes.C2oiQdJS.js";import{c as B}from"./svelte-component.DG6SyfSz.js";import{a as K,S as N}from"./Story.D3ugDL9a.js";import{b as f}from"./entry.BrEBdTOf.js";import"./transform.BXP9HJX6.js";var O=_('<div class="interstitial-inner svelte-x691e7"><div class="sticker-set svelte-x691e7"><img class="icon svelte-x691e7" alt="mailbox sticker"></div> <p class="svelte-x691e7">Get The Pudding <br>in your inbox</p> <form action="https://buttondown.com/api/emails/embed-subscribe/thepudding" method="post" class="embeddable-buttondown-form svelte-x691e7"><input type="email" class="email-input svelte-x691e7" name="email" placeholder="you@example.com"> <input type="hidden" value="1" name="embed" class="svelte-x691e7"> <input type="submit" class="submit-input svelte-x691e7" value="Subscribe"></form></div>');function R(m){var c=O(),d=l(c),v=l(d);y(v,"src",`${f??""}/assets/stickers/mailbox@2x.png`),a(d),S(4),a(c),k(m,c)}function U(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}var W=_('<div class="interstitial-inner svelte-1cdiliy"><p class="svelte-1cdiliy">If you like our stories,<br> youâ€™ll love our merch</p> <div class="sticker-set svelte-1cdiliy"><img class="icon svelte-1cdiliy" alt="pudding tee with a skeleton working on a computer"> <img class="sticker-left svelte-1cdiliy" alt="a red and yellow technical sticker that reads The Pudding: Visual Data Stories About Just About Everything"> <img class="sticker-right svelte-1cdiliy" alt="a green blob sticker that reads Pudding Dot Cool"></div> <a href="https://the-pudding.printify.me/products" class="svelte-1cdiliy">Shop our swag</a></div>');function X(m,c){D(c,!0);let d=$(`${f}/assets/img/merch-tee-light.png`);const v=()=>{const e=U();M(d,j(e==="dark"?`${f}/assets/img/merch-tee-light.png`:`${f}/assets/img/merch-tee-dark.png`))};L(()=>{v();const e=window.matchMedia("(prefers-color-scheme: dark)"),o=()=>{v()};return e.addEventListener("change",o),()=>{e.removeEventListener("change",o)}});var r=W(),i=x(l(r),2),n=l(i),u=x(n,2);y(u,"src",`${f??""}/assets/img/merch-sticker-left.png`);var p=x(u,2);y(p,"src",`${f??""}/assets/img/merch-sticker-right.png`),a(i),S(2),a(r),I(()=>y(n,"src",t(d))),k(m,r),P()}var Y=_('<p class="svelte-10awf7u">Some of my favorite projects: <!>.</p> <div class="credit svelte-10awf7u"><a class="svelte-10awf7u"><img class="svelte-10awf7u"> <p class="name svelte-10awf7u"> </p> <p class="title svelte-10awf7u">Pudding Staff</p></a></div>',1),Z=_('<div class="interstitial-inner svelte-10awf7u"><!></div>');function ee(m,c){D(c,!0);const{stories:d,staff:v}=G("Home");let r=$(void 0),i=$(void 0);H(()=>{const e=d.filter(s=>s.faves),o=K(e)[0].faves.trim(),h=e.filter(s=>s.faves===o).slice(0,3);M(i,j(v.find(s=>s.id===o)));const g=h.map(({href:s,short:b})=>`<a href=${s} rel="external" class="bold-link">${b}</a>`).join(", ");M(r,j(g.replace(/,([^,]*)$/," and$1")))});var n=Z(),u=l(n);F(u,()=>t(r),p=>{var e=Y(),o=E(e),h=x(l(o));q(h,()=>t(r)),S(),a(o);var g=x(o,2),s=l(g),b=l(s),w=x(b,2),T=l(w,!0);a(w),S(2),a(s),a(g),I(()=>{y(s,"href",`${f??""}/author/${t(i).slug??""}`),y(b,"src",`${f??""}/common/assets/authors/${t(i).id??""}.jpg`),y(b,"alt",`headshot of ${t(i).name??""}`),Q(T,t(i).name)}),k(p,e)}),a(n),k(m,n),P()}var se=_('<li class="svelte-lc01k1"><!></li>'),te=_('<section id="stories" class="svelte-lc01k1"><ul class="svelte-lc01k1"></ul></section>');function me(m,c){const d={Subscribe:R,Faves:ee,Merch:X};let v=V(c,"resource",3,!1);var r=te(),i=l(r);z(i,21,()=>c.stories,n=>n.slug,(n,u)=>{var p=se();const e=J(()=>d[t(u).component]);var o=l(p);F(o,()=>t(e),h=>{var g=A(),s=E(g);B(s,()=>t(e),(b,w)=>{w(b,C(()=>t(u)))}),k(h,g)},h=>{N(h,C(()=>t(u),{get resource(){return v()}}))}),a(p),k(n,p)}),a(i),a(r),k(m,r)}export{me as S};
